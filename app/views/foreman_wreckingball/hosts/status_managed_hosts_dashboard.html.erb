<% title _('VMware Managed Hosts Overview') %>
<% javascript 'foreman_wreckingball/status_managed_hosts_dashboard' %>

<%= title_actions(
  button_group(
    if params[:owned_only]
      link_to _('Show all hosts'), status_managed_hosts_dashboard_hosts_path, class: 'btn btn-default'
    else
      link_to _('Show only owned hosts'), status_managed_hosts_dashboard_hosts_path(owned_only: true), class: 'btn btn-default'
    end
  )
) %>

<% if @missing_hosts.any? %>
  <%= content_tag :h2, _('List of hosts not found in vSphere') %>
  <%= content_tag :table, id: 'missing_vms', class: table_css_classes do %>
    <thead>
      <tr>
        <%= content_tag :th, _('Name') %>
      </tr>
    </thead>
    <tbody>
      <% @missing_hosts.each do |host| %>
        <tr>
          <%= content_tag :td, host.name %>
        </tr>
      <% end %>
    </tbody>
  <% end %>
<% end %>

<% if @duplicate_vms.any? %>
  <%= content_tag :h2, _('List of VMs with same uuid')  %>
  <%= content_tag :table, id: 'duplicate_vms', class: table_css_classes do %>
    <thead>
      <tr>
        <%= content_tag :th, _('UUID') %>
        <%= content_tag :th, _('Name') %>
      </tr>
    </thead>
    <tbody>
      <% @duplicate_vms.each do |uuid, hosts| %>
        <% hosts.each do |host| %>
          <tr>
            <%= content_tag :td, host.uuid %>
            <%= content_tag :td, host.name %>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  <% end %>
<% end %>

<% if @different_hosts.any? %>
  <%= content_tag :h2, _('List of VMs associated with different compute resources') %>
  <%= content_tag :table, id: 'different_vms', class: table_css_classes do %>
    <thead>
      <tr>
        <%= content_tag :th, _('UUID') %>
        <%= content_tag :th, _('Name') %>
      </tr>
    </thead>
    <tbody>
      <% @different_hosts.each do |host| %>
        <tr>
          <%= content_tag :td, host.uuid %>
          <%= content_tag :td, host.name %>
        </tr>
      <% end %>
    </tbody>
  <% end %>
<% end %>
